<div search-form data-controller="load-search-questions">
  <div class="container align">
    <div class="search-form d-flex justify-content-center">
      <%= form_with url: movies_path, method: :get do |form| %>


<!-- QUESTION ONE : GENRE -->

      <div id="question-1" class="question" data-load-search-questions-target="question">
        <h3>What genre do you fancy?</h3>
        <!-- DROPDOWN <%= form.select :keyword, @genres%>-->

        <!-- GENRE SELECTION -->
        <!-- Not check_boxes as isn't expecting an array (genre -> nil) -->
          <div class="options">
            <%= form.collection_radio_buttons :keyword, @genres, :last, :first, include_hidden: false do |b| %>
              <div class="genre-tag-item">
                <%= b.radio_button class: "genre-tag-selector" %>
                <%= b.label %>
              </div>
            <% end %>
          </div>
          <button id="btn-1"
                  data-action="click->load-search-questions#nextQuestion"
                  data-load-search-questions-target="button"
                  class="btn btn-white">
            OK
          </button>

      <!-- SKIP -->
          <%= form.collection_radio_buttons :keyword, @skip, :last, :first, include_hidden: false do |b| %>
              <%= b.radio_button class: "genre-tag-selector" %>
          <% end %>

          <button id="btn-1"
                  data-action="click->load-search-questions#nextQuestion"
                  data-load-search-questions-target="button"
                  class="btn btn-white">
            Don't mind!
          </button>
      </div>


<!-- QUESTION TWO : PLATFORMS -->

      <div id="question-2" class="question hidden" data-load-search-questions-target="question">
        <h3>What streaming services do you have access to?</h3>
        <div class="options">
          <%= form.collection_check_boxes :platform_ids, Platform.all, :id, :display_name, include_hidden: false do |b| %>
            <%# <div class="platform-tag-item">
              <%= b.check_box class: "platform-tag-selector" %>
              <%# <%= b.label  %>
            <%# </div> %>
            <% if current_user.platforms.include? (b.object) %>
          <%= b.label(class: "platform-flex-item", data: {controller: "user-platform"}) { b.check_box(checked: true, class: "d-none") + image_tag(b.object.logo_path, class: "btn user-platform", data: {action: 'click->user-platform#change', target: "button"})} %>
            <% else %>
          <%= b.label(class: "platform-flex-item user-platform-unselected", data: {controller: "user-platform"}) { b.check_box(checked: false, class: "d-none") + image_tag(b.object.logo_path, class: "btn user-platform", data: {action: 'click->user-platform#change', target: "button"})} %>

      <% end %>
          <% end %>
</div>
        <button id="btn-2"
                data-action="click->load-search-questions#nextQuestion"
                data-load-search-questions-target="button"
                class="btn btn-white">
          OK
        </button>

      </div>


<!-- QUESTION THREE : CRITIC SCORE -->

        <div id="question-3" class="question hidden" data-load-search-questions-target="question">
          <h3>Do you care what the critcs say?</h3>
          <div class="options">
            <%= form.collection_radio_buttons :review_site, [['IMDb', 'imdb'], ['Metacritic', 'metacritic'], ['No Site', 'no_site']], :last, :first, include_hidden: false do |b| %>
              <div class="tag-item">
                <%= b.radio_button class: "tag-selector" %>
                <%= b.label  %>
              </div>
            <% end %>

            <!-- <%= form.radio_button :review_site, "imdb" %>
            <%= form.label :imdb, "IMDb" %>
            <%= form.radio_button :review_site, "metacritic" %>
            <%= form.label :metacritic, "Metacritic" %>
            <%= form.radio_button :review_site, "no_site", checked: true %>
            <%= form.label :no_site, "No review site" %> -->
          </div>


          <h5>Pick a minimum score for your film</h5>
          <div class="options">
            <%= form.collection_radio_buttons :score, [['60'], ['70'], ['80'], ['90']], :first, :first, include_hidden: false do |b| %>
              <div class="tag-item">
                <%= b.radio_button class: "tag-selector" %>
                <%= b.label  %>
              </div>
            <% end %>

            <!-- <%= form.radio_button :score, "60" %>
            <%= form.label :'60', "60" %>
            <%= form.radio_button :score, "70" %>
            <%= form.label :'70', "70" %>
            <%= form.radio_button :score, "80" %>
            <%= form.label :'80', "80" %>
            <%= form.radio_button :score, "90" %>
            <%= form.label :'90', "90" %> -->
          </div>

          <button id="btn-3"
                  data-action="click->load-search-questions#nextQuestion"
                  data-load-search-questions-target="button"
                  class="btn btn-white">
            OK
          </button>
        </div>


<!-- QUESTION FOUR : DURATION -->

        <div id="question-4" class="question hidden" data-load-search-questions-target="question">
          <h3>How much time do you have?</h3>
          <div class="options">
            <%= form.collection_radio_buttons :time, [['90 mins', '90'], ['120 mins', '120'], ['150 mins', '150'], ['No Limit', 'no_limit']], :last, :first, include_hidden: false do |b| %>
              <div class="tag-item">
                <%= b.radio_button class: "tag-selector" %>
                <%= b.label  %>
              </div>
            <% end %>

            <!-- <%= form.radio_button :time, "90" %>
            <%= form.label :'90', "90 mins" %>
            <%= form.radio_button :time, "120" %>
            <%= form.label :'120', "120 mins" %>
            <%= form.radio_button :time, "150" %>
            <%= form.label :'150', "150 mins" %>
            <%= form.radio_button :time, "no_limit", checked: true %>
            <%= form.label :no_limit, "No limit" %> -->
          </div>


          <%= form.submit "Search", class: "btn btn-white", id: "btn-4" %>
        </div>


      <% end %>
    </div>
  </div>
  <div class="search-navigation">
    <span class="directional back hidden" data-action="click->load-search-questions#previousQuestion" data-load-search-questions-target="back">
      <i class="fas fa-chevron-left fa-lg"></i>
    </span>
    <span class="directional forward" data-action="click->load-search-questions#nextQuestion" data-load-search-questions-target="forward">
      <i class="fas fa-chevron-right fa-lg"></i>
    </span>
  </div>
</div>
